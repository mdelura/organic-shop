<mat-toolbar color="primary">
    <button mat-button [matMenuTriggerFor]="productsMenu">Products</button>
    <mat-menu #productsMenu="matMenu">
        <button mat-menu-item 
            routerLink="/" [disabled]="!activeCategory">All Categories</button>
        <button mat-menu-item 
            *ngFor="let category of categories$ | async"
            routerLink="/"
            [queryParams]="{ category: category.value }"
            [disabled]="activeCategory === category.value"> {{ category.name }} </button>
    </mat-menu>
    <span class="fill-remaining-space"></span>
    <button mat-icon-button>
        <mat-icon routerLink="shopping-cart" matTooltip="Go to Shopping Cart">shopping_cart</mat-icon>
    </button>
    <button mat-icon-button [matMenuTriggerFor]="userMenu">
        <mat-icon>person</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu" yPosition="below" [overlapTrigger]="false">
        <ng-template #anonymousUser>
            <button mat-menu-item routerLink="login">Login</button>
        </ng-template>
        <ng-container *ngIf="appUser; else anonymousUser">
            <button mat-menu-item routerLink="my-orders">My Orders</button>
            <ng-container *ngIf="appUser.isAdmin">
                <button mat-menu-item routerLink="admin/orders">Manage Orders</button>
                <button mat-menu-item routerLink="admin/products">Manage Products</button>
            </ng-container>
            <button mat-menu-item (click)="logout()">Log Out</button>
        </ng-container>
    </mat-menu>
</mat-toolbar>